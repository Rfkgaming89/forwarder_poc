# DirectAdmin Email Forwarder Manager

⚠️ **PROOF OF CONCEPT** - This application was generated by AI and has not been audited for security or production use.

A PHP web application for managing email forwarders through the DirectAdmin API on MXroute servers.

# MXRoute Email Forwarder - Docker

A self-contained Docker setup for the MXRoute Email Forwarder application. Perfect for NAS deployments with zero external dependencies.

## 🚀 Quick Start

1. **Clone or download the MXRoute forwarder files**
2. **Place the Docker files in the same directory as your PHP files**
3. **Build and run:**
   ```bash
   docker-compose up -d --build
   ```
4. **Access the application:** `http://your-server-ip:3311`

## 📁 Directory Structure

Your directory should look like this:

```
mxroute-forwarder/
├── Dockerfile
├── docker-compose.yml
├── config.php
├── DirectAdminAPI.php
├── index.php
├── dashboard.php
└── manage_forwarder.php
```

## 🔧 Configuration

### Changing the Port

The default external port is `3311`. To change it:

1. **Edit `docker-compose.yml`:**
   ```yaml
   ports:
     - "YOUR_PORT:80"  # Change YOUR_PORT to desired port
   ```

2. **Examples:**
   ```yaml
   # For port 8080
   ports:
     - "8080:80"
   
   # For port 9000
   ports:
     - "9000:80"
   
   # For port 3000
   ports:
     - "3000:80"
   ```

3. **Rebuild the container:**
   ```bash
   docker-compose down
   docker-compose up -d --build
   ```

> **Note:** Always keep the right side as `:80` (internal container port). Only change the left side (external port).

## 🐳 Docker Commands

### Basic Operations
```bash
# Build and start
docker-compose up -d --build

# Stop the container
docker-compose down

# View logs
docker-compose logs -f

# Restart
docker-compose restart

# Rebuild after changes
docker-compose down
docker-compose up -d --build
```

### Manual Docker Commands
```bash
# Build image manually
docker build -t mxroute-forwarder .

# Run container manually (using port 3311)
docker run -d -p 3311:80 --name mxroute-forwarder mxroute-forwarder

# Stop and remove
docker stop mxroute-forwarder
docker rm mxroute-forwarder
```

## 🛠️ Updating the Application

To update your PHP files:

1. **Replace the PHP files** in your directory
2. **Rebuild the container:**
   ```bash
   docker-compose down
   docker-compose up -d --build
   ```

The new files will be baked into the image.

## 🔒 Security Features

This Docker setup includes:

- ✅ **Security headers** (X-Frame-Options, X-XSS-Protection, etc.)
- ✅ **Directory browsing disabled**
- ✅ **Sensitive files hidden** (.md, .log files)
- ✅ **PHP security settings** (expose_php off, display_errors off)
- ✅ **Session security** (httponly, strict mode)
- ✅ **Server signature hidden**

## 🏠 NAS-Specific Notes

### Synology NAS
- Use **Container Manager** or SSH
- Default port 3311 should work fine
- Access via `http://synology-ip:3311`

### QNAP NAS
- Use **Container Station** or SSH
- May need to check firewall settings
- Access via `http://qnap-ip:3311`

### TrueNAS/FreeNAS
- Use **Apps** section or SSH
- Ensure port 3311 is not blocked
- Access via `http://truenas-ip:3311`

## 📊 Resource Usage

This container is lightweight:
- **Memory:** ~50-100MB
- **CPU:** Minimal (only during web requests)
- **Storage:** ~200MB (base image + your files)

## 🐛 Troubleshooting

### Container won't start
```bash
# Check logs
docker-compose logs

# Check if port is in use
netstat -tlnp | grep 3311
```

### Can't access the application
1. **Check if container is running:**
   ```bash
   docker-compose ps
   ```

2. **Check firewall settings** on your NAS

3. **Try different port** in `docker-compose.yml`

4. **Check logs for errors:**
   ```bash
   docker-compose logs -f
   ```

### Permission issues
```bash
# Fix file permissions before building
chmod -R 755 .
```

### Port already in use
```bash
# Find what's using the port
sudo lsof -i :3311

# Or change port in docker-compose.yml
ports:
  - "3312:80"  # Use different port
```
### open config.php
```bash
and change

define('DEFAULT_DA_SERVER', 'glacier.mxrouting.net');
to your server
```

## 📝 Requirements

- **Docker** and **Docker Compose** installed
- **MXRoute account** with DirectAdmin access
- **Network access** to MXRoute servers

## 🔗 Related Links

- [Original MXRoute Forwarder](https://github.com/mxroute/forwarder_poc)
- [Docker Documentation](https://docs.docker.com/)
- [MXRoute Support](https://mxroute.com/)

## 📄 License

This Docker setup follows the same license as the original MXRoute forwarder application.

---
